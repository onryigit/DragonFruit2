// <auto-generated />
using DragonFruit2;
using DragonFruit2.Common;
using System.CommandLine;
using System.Diagnostics.CodeAnalysis;
using System.Runtime.CompilerServices;

namespace SampleConsoleApp;

/// <summary>
/// 
/// </summary>
public partial class MyArgs : CliArgs, ICliArgs<MyArgs>
{
    private static MyArgsBuilder builder;

    private class MyArgsBuilder
    {
        internal Option<string> nameOption;
        internal Option<Int32> ageOption;
        internal Option<string> greetingOption;

        public MyArgsBuilder()
        {
            nameOption = new Option<string>("--name")
            {
                Description = "Your name",
                Required = true
            };
            ageOption = new Option<int>("--age")
            {
                Description = "Your Age"
            };
            greetingOption = new Option<string>("--greeting")
            {
                Description = "Greeting message"
            };
        }

        public System.CommandLine.Command Build()
        {
            var rootCommand = new System.CommandLine.Command("Test");
            rootCommand.Add(nameOption);
            rootCommand.Add(ageOption);
            rootCommand.Add(greetingOption);
            rootCommand.Add(new System.CommandLine.Command("TestChild"));
            return rootCommand;
        }
    }


    public static System.CommandLine.Command CreateCli()
    {
        builder ??= new MyArgsBuilder();
        return builder.Build();
    }

    // Only generate the following constructor if there are no other constructors defined (possibly via partial constructor)
    public MyArgs()
    {
    }

    [SetsRequiredMembers()]
    private MyArgs(DataValue<string> nameDataValue, DataValue<Int32> ageDataValue, DataValue<string> greetingDataValue)
    {
        if (nameDataValue.IsSet)
            Name = nameDataValue.Value;
        if (ageDataValue.IsSet)
            Age = ageDataValue.Value;
        if (greetingDataValue.IsSet)
            Greeting = greetingDataValue.Value;
    }

    public static MyArgs Create()
    {
        var nameDataValue = GetDataValue<string>("Name", builder.nameOption);
        var ageDataValue = GetDataValue<Int32>("Age", builder.ageOption);
        var greetingDataValue = GetDataValue<string>("Greeting", builder.greetingOption);

        var newArgs = new MyArgs(nameDataValue, ageDataValue, greetingDataValue);

        return newArgs;
    }

    public static MyArgs Create(ParseResult parseResult)
    {
        SetCliDataProvider<MyArgs>(parseResult);
        return Create(); 
    }
}
